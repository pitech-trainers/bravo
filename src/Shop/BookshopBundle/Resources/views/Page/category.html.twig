{% extends 'ShopBookshopBundle::layout.html.twig' %}

{% block title %}Category{% endblock%}
{% block container %}  
<div class="main-container col3-layout">
    <div class="main">
        <div class="breadcrumbs">
            <ul>
                <li class="home">
                    <a href="{{ path('shop_bookshop_homepage') }}" title="Go to Home Page">{{'Home'|trans}}</a>
                    <span>/ </span>
                </li>
                <li class="category35">
                    <strong>
                        {% if products.params.clabel is defined %} 
                            {{products.params.clabel}} 
                        {% endif %}
                        {% if products.params.search is defined %} 
                            {{'Search By: '~products.params.search}} 
                        {% endif %}    
                    </strong>
                </li>
            </ul>
        </div>
           
        <div class="col-wrapper">
            <div class="col-main">
                <div class="page-title category-title">
                    <h1>{% if products.params.clabel is defined %} 
                            {{products.params.clabel}} 
                        {% endif %}
                        {% if products.params.search is defined %} 
                            {{"Search By: ' "~products.params.search~"'"}} 
                        {% endif %}
                    </h1>
                </div>

                <div class="category-products">
                    <div class="toolbar">
                        {% if products.items %}
                            <div class="pager">
                                <p class="amount">
                                    <strong>{{ products.getTotalItemCount }} {{'Item(s)'|trans}}</strong>
                                </p>

                                <div class="pages">
                                    <strong>{{'Page'|trans}}: {{ knp_pagination_render(products) }}</strong>

                                </div>
                            </div>

                            <div class="sorter">
                                <div class="sort-by">
                                    <label>{{'Sort By'|trans}}:</label>
                                            <button {% if products.isSorted('Title ') %} {% endif %}>{{ knp_pagination_sortable(products, 'Title ', 'title ') }}</button>
                                            <button {% if products.isSorted('Price ') %} {% endif %}>{{ knp_pagination_sortable(products, 'Price ', 'price ') }}</button>
                                    {% if products.params.direction is defined %}
                                    <label>{{'Direction'|trans}}: {{products.params.direction}}endent</label>
                                    {% endif %}
                                </div>
                            </div>    
                        {% else %}
                                {{ 'There are no items in this category.'|trans }} 
                        {% endif %}
                    </div>
                    
                    <ul class="products-grid">
                    {% for product in products %}    
                        {% if loop.index%3==1 %}

                            <li class="item first">
                                <a href="product_detail.html" title="{{ product.title }}" class="product-image"><img src="{{ asset('bundles/shopbookshop/image/'~product.image) }}" width="135" height="135" alt="{{product.title}}" /></a>
                                <h2 class="product-name"><a href="product_detail.html" title="{{product.title}}">{{product.title}}</a></h2>
                                <div class="price-box">
                                    <span class="regular-price" id="product-price-168">
                                        <span class="price">{{product.price}} US$</span>
                                    </span>
                                </div>

                                {% if product.active>0 %}
                                <div class="actions">
                                    <button type="button" title="Add to Cart" class="button btn-cart" >
                                        <span><span>Add to Cart</span></span>
                                    </button>
                                </div>
                                {% else %} <div class="actions" style='color:red'><span>Not available</span></div>
                                {% endif %}
                            </li>
                        {% endif %}
                        {% if loop.index%3==2 %}
                            <li class="item">
                                <a href="product_detail.html" title="{{ product.title }}" class="product-image"><img src="{{ asset('bundles/shopbookshop/image/'~product.image) }}" width="135" height="135" alt="{{product.title}}" /></a>
                                <h2 class="product-name"><a href="product_detail.html" title="{{product.title}}">{{product.title}}</a></h2>
                                <div class="price-box">
                                    <span class="regular-price" id="product-price-168">
                                        <span class="price">{{product.price}} US$</span>
                                    </span>
                                </div>

                                {% if product.active>0 %}
                                <div class="actions">
                                    <button type="button" title="Add to Cart" class="button btn-cart" >
                                        <span><span>Add to Cart</span></span>
                                    </button>
                                </div>
                                {% else %} <div class="actions" style='color:red'><span>Not available</span></div>    
                                {% endif %}
                            </li>
                        {% endif %}
                        {% if loop.index%3==0 %}
                            <li class="item">
                                <a href="product_detail.html" title="{{ product.title }}" class="product-image"><img src="{{ asset('bundles/shopbookshop/image/'~product.image) }}" width="135" height="135" alt="{{product.title}}" /></a>
                                <h2 class="product-name"><a href="product_detail.html" title="{{product.title}}">{{product.title}}</a></h2>
                                <div class="price-box">
                                    <span class="regular-price" id="product-price-168">
                                        <span class="price">{{product.price}} US$</span>
                                    </span>
                                </div>
                                {% if product.active>0 %}
                                <div class="actions">
                                    <button type="button" title="Add to Cart" class="button btn-cart" >
                                        <span><span>Add to Cart</span></span>
                                    </button>
                                </div>
                                {% else %} <div class="actions" style='color:red'><span>Not available</span></div>    
                                {% endif %}    
                            </li>
                        {% endif %}
                    {% endfor %}    
                    </ul>

                        <div class="toolbar-bottom">
                            <div class="toolbar">
                            {% if products.items %}

                                    <div class="pager">
                                    <p class="amount">
                                        <strong>{{ products|length }} {{'Item(s)'|trans}}</strong>
                                    </p>

                                    <div class="pages">
                                        <strong>{{'Page'|trans}}: {{ knp_pagination_render(products) }}</strong>
                                    </div>
                                </div>
                                    
                            {% endif %}
                            </div>
                        </div>
                </div>
            </div>
                {% block leftSidebar %}{{ parent() }}{% endblock %}
        </div>
            
            <div class="col-right sidebar">
                <div class="block block-cart">
                    <div class="block-title">
                        <strong><span>My Cart</span></strong>
                    </div>
                    <div class="block-content">
                        <p class="empty">You have no items in your shopping cart.</p>
                    </div>
                </div>
            </div>    
    </div>
</div>
{% endblock %}